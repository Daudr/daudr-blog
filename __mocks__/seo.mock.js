export const post = {
  id: "d31e72e3-b118-5b7c-a6c0-d2b4654b8025",
  excerpt:
    "If you have a project thatâ€™s based on Angular v7 and donâ€™t have the chance to upgrade to the upcoming v8 or you want to test one of the most useful smallâ€¦",
  html:
    '<p>If you have a project thatâ€™s based on Angular v7 and donâ€™t have the chance to upgrade to the upcoming v8 or you want to test one of the most useful small features of the future version here you will find how to do it.</p>\n<p><span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;"\n    >\n      <a\n    class="gatsby-resp-image-link"\n    href="/static/7e5edc618965192fccedd6fbec5b3f68/158cc/performance.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n    <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQFBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAefoVGcvH//EABsQAAIBBQAAAAAAAAAAAAAAAAABAxETFCEi/9oACAEBAAEFAhLgUdSzrHP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAABBQAAAAAAAAAAAAAAAAAAEBESMTL/2gAIAQEABj8CWxpGj//EAB0QAAIABwEAAAAAAAAAAAAAAAABEBEhMZHR8PH/2gAIAQEAAT8hH1pLcPME9zg7kf/aAAwDAQACAAMAAAAQxA//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAQEBAQADAAAAAAAAAAAAAREAIVFhofD/2gAIAQEAAT8Qzp6r1Yx58Ze4mdmOPEWefvTBrpf27//Z\'); background-size: cover; display: block;"\n  ></span>\n  <img\n        class="gatsby-resp-image-image"\n        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;"\n        alt="Dance of souls"\n        title=""\n        src="/static/7e5edc618965192fccedd6fbec5b3f68/c739e/performance.jpg"\n        srcset="/static/7e5edc618965192fccedd6fbec5b3f68/8ee9c/performance.jpg 148w,\n/static/7e5edc618965192fccedd6fbec5b3f68/ebbe7/performance.jpg 295w,\n/static/7e5edc618965192fccedd6fbec5b3f68/c739e/performance.jpg 590w,\n/static/7e5edc618965192fccedd6fbec5b3f68/5413e/performance.jpg 885w,\n/static/7e5edc618965192fccedd6fbec5b3f68/4efde/performance.jpg 1180w,\n/static/7e5edc618965192fccedd6fbec5b3f68/158cc/performance.jpg 4788w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n  </a>\n    </span></p>\n<blockquote>\n<p>Photo by <a href="https://unsplash.com/photos/JhqhGfX_Wd8" target="_blank" rel="nofollow noopener noreferrer">Ahmad Odeh</a> on <a href="https://unsplash.com" target="_blank" rel="nofollow noopener noreferrer">Unsplash</a></p>\n</blockquote>\n<h2>The trick</h2>\n<p>In the development of Angular, weâ€™re using TypeScript with a lot of modern JavaScript features. Not all of them are supported by the usersâ€™ browsers so thatâ€™s why as part of the production build we ship a file called polyfills.js.</p>\n<p>Over the past couple of years, browsers started implementing a lot of these APIs. The chances are that a user whoâ€™s on the latest version of Chrome, for instance, will not need any of the ES2015 polyfills that we ship as part of polyfills.js. Instead, their browser will support them natively. This makes large portion of the content of polyfills.js obsolete and unnecessary.</p>\n<p>Thatâ€™s why, starting from Angular CLI 7.3.0, it was introduced conditional polyfill loading! As part of the default build process, Angular CLI will produce two bundles polyfills.js and es2015-polyfills.js. polyfills.js includes only the polyfills required by the browsers which have all the ES2015 features implemented natively. In contrast, es2015-polyfills.js contains all the polyfills from polyfills.js + ES2015 ones (such as Map, Set, etc).</p>\n<p>The result should be your <code class="language-text">index.html</code>â€™s body looking like this:</p>\n<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-root</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-root</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>runtime.***.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>es2015-polyfills.***.js<span class="token punctuation">"</span></span> <span class="token attr-name">nomodule</span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>polyfills.***.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main.***.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre></div>\n<p>On the snippet above, you can see that Angular CLI has added the <code class="language-text">nomodule</code> attribute to the es2015 polyfills tag. This attribute let the browsers download and execute the script only if it doesnâ€™t recognize the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#module-script" target="_blank" rel="nofollow noopener noreferrer">module script web api</a>, this means that the browser is old ðŸ‘Œ</p>\n<p>You might be wondering: all my users are with modern browsers, why would I have to wait for the CLI to produce es2015-polyfills.js that will never be in use? If youâ€™re really thinking this, then youâ€™re a happy developer. If you want to ignore ES2015 polyfills completely, then build your application running:</p>\n<p><code class="language-text">ng build --es5BrowserSupport=false</code></p>\n<p>By setting the â€”es5BrowserSupport flag to false, Angular CLI will produce only polyfills.js which contains the polyfills required by ES2015 enabled browsers, but your app wonâ€™t work properly on those old browsers anymore.</p>\n<p>If you donâ€™t want to set the property every time you run the build command, you can directly modify the property in your <code class="language-text">angular.json</code> file:</p>\n<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"projects"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"project-name"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n      ...\n      <span class="token property">"architect"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token property">"build"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n          ...\n          <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n            ...\n            <span class="token property">"es5BrowserSupport"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></code></pre></div>\n<p>This trick lets you save the scripting of about 60Kb of javascript ðŸ˜Ž</p>',
  frontmatter: {
    title: "Conditional Polyfill in Angular v7",
    date: "May 18, 2019",
    description:
      "How to enable conditional polyfills loading in an Angular v7 project",
    keywords: [
      "angular",
      "conditional polyfills",
      "performance",
      "cli",
      "code",
      "guide",
    ],
    tags: ["angular", "performance", "cli", "code", "guide"],
  },
}
